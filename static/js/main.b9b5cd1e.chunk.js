(this.webpackJsonpcovidmeet=this.webpackJsonpcovidmeet||[]).push([[0],{28:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(11),s=n.n(o),i=(n(28),n(2)),c=n(53),l=n(55),u=n(54),d=n(50),b=n(51),j=n(0),m=function(e){var t=e.allowedDistanceRadius,n=e.user,r=void 0!==n&&n,a=e.location,o=e.name,s=e.color;return console.log("adding marker",r,o,a),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(u.a,{center:[a.lat,a.lng],pathOptions:{color:s,stroke:!0,weight:5},radius:t,children:[Object(j.jsx)(d.a,{direction:"bottom",opacity:1,permanent:!0,children:o}),Object(j.jsx)(b.a,{position:[a.lat,a.lng]})]})})},f=n(4),h=[-33.8688,151.2093],p=n(19),x=n.n(p),O=function(e){var t=e.user,n=e.setUser,a=e.allowedDistanceRadius,o=Object(r.useState)(!1),s=Object(i.a)(o,2),c=s[0],l=s[1],u=Object(r.useState)(""),d=Object(i.a)(u,2),b=d[0],m=d[1],h="".concat("https://georgewritescode.github.io/meetupradius","?name=").concat(t.name,"&lat=").concat(t.location.lat,"&lng=").concat(t.location.lng,"&id=").concat(t.id);return t.name?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("label",{className:"block text-gray-700 font-semibold text-sm mb-2 w-full text-center",children:"Share this URL with friends to share your meetup radius"}),Object(j.jsxs)("div",{className:"w-full flex items-center",children:[Object(j.jsx)("input",{className:"shadow appearance-none border rounded w-full mr-2 py-2 px-3 leading-tight focus:outline-none focus:shadow-outline",id:"shareURL",type:"text",readOnly:!0,value:h}),Object(j.jsx)("button",{onClick:function(){navigator.clipboard.writeText(h),l(!0)},className:"btn btn-primary",type:"button",children:c?"Copied":"Copy"})]})]}):Object(j.jsxs)("div",{className:"text-left",children:[Object(j.jsxs)("label",{className:"block text-gray-700 font-bold mb-2 text-center w-full",children:["Enter your first name to share your ",a/1e3,"km radius with friends"]}),Object(j.jsxs)("div",{className:"w-full flex items-left",children:[Object(j.jsx)("input",{className:"shadow appearance-none border rounded w-full mr-2 py-2 px-3 leading-tight focus:outline-none focus:shadow-outline",id:"getNameInput",type:"text",placeholder:"first name",onChange:function(e){return m(e.target.value)},value:b}),Object(j.jsx)("button",{disabled:""===b,onClick:function(){n(Object(f.a)(Object(f.a)({},t),{},{name:b}),(function(){navigator.clipboard.writeText(h),x.a.fire({icon:"success",title:"Thanks! Share the URL copied to your clipboard with friends to see your meet-up radius"})}))},className:"btn btn-primary",type:"button",children:"Submit"})]})]})},g=function(e){var t=e.friend,n=e.removeFriend;return Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{className:"text-xl",style:{color:t.color},children:"\u25cf\xa0"}),t.name,Object(j.jsx)("span",{onClick:function(){return n(t)},className:"text-right text-lg cursor-pointer",title:"Remove friend",children:" \xd7 "})]})},w=function(e){var t=e.friends,n=e.removeFriend;return 0===t.length?Object(j.jsx)("div",{}):Object(j.jsxs)("div",{className:"text-left",children:[Object(j.jsx)("label",{className:"mt-8 block text-gray-700 font-bold mb-2 text-sm",children:"Friends"}),Object(j.jsx)("div",{className:"w-full",children:Object(j.jsx)("ul",{children:t.map((function(e){return Object(j.jsx)(g,{removeFriend:n,friend:e},e.id)}))})})]})},v=function(e){var t=e.allowedDistanceRadius,n=e.setAllowedDistanceRadius;return Object(j.jsxs)("div",{className:"w-full text-left",children:[Object(j.jsx)("label",{className:"mt-8 block text-gray-700 text-sm font-bold mb-2",children:"Radius allowed to travel"}),Object(j.jsxs)("div",{className:"w-full",children:[Object(j.jsx)("input",{className:"shadow appearance-none border rounded w-24 mr-2 py-2 px-3 leading-tight focus:outline-none focus:shadow-outline",id:"shareURL",type:"number",onChange:function(e){return n(1e3*Number.parseInt(e.target.value))},value:t/1e3}),Object(j.jsx)("span",{children:"Km"})]})]})},y=function(){return Object(j.jsxs)("div",{className:"text-sm w-full text-left mt-8 text-gray-500",children:[Object(j.jsx)("label",{className:"mt-8 block font-bold",children:"Note:"}),Object(j.jsx)("div",{className:"w-full p-4",children:Object(j.jsxs)("ul",{className:"list-disc list-outside",children:[Object(j.jsx)("li",{children:"Locations may not be precise and are rounded to a precision of ~100m"}),Object(j.jsx)("li",{children:"Your location data is private and is not stored on our servers. It is stored on your web browser"}),Object(j.jsx)("li",{children:"This website may not be updated for the latest regulations"}),Object(j.jsx)("li",{children:"Contact: georgecameronpersonal @ (popular email service run by Google) "})]})})]})},N=n(22),F=function(e){var t=e.user,n=e.friends,r=e.setFriends,a=new URLSearchParams(window.location.search),o=a.get("id");if(o&&o!==(null===t||void 0===t?void 0:t.id)&&!(n.filter((function(e){return e.id===o})).length>0)){var s=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}(),i={id:a.get("id"),name:a.get("name"),color:s,location:{lat:Number.parseFloat(a.get("lat")),lng:Number.parseFloat(a.get("lng"))}};console.log("newFriend",i),r([].concat(Object(N.a)(n),[i]))}},R=n(15),k=n.n(R),S=n(20),C=n(52),D=n(21),T=n.n(D),U=function(e){var t=e.setUser,n=e.user,a=e.setMapObj,o=Object(r.useState)(!1),s=Object(i.a)(o,2),c=s[0],l=s[1],u=Object(C.a)({click:function(){u.locate()},locationfound:function(){var e=Object(S.a)(k.a.mark((function e(r){var a,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c||(u.panTo(r.latlng,u.getZoom()),l(!0)),!(null===n||void 0===n?void 0:n.location)){e.next=3;break}return e.abrupt("return");case 3:a=Number.parseFloat(r.latlng.lat).toFixed(3),o=Number.parseFloat(r.latlng.lng).toFixed(3),t({id:T.a.generate(),location:{lat:a,lng:o}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(r.useEffect)((function(){u.locate(),a(u)}),[u]),null},L=window.localStorage,I=function(e,t){return JSON.parse(L.getItem(e))||t},M=function(e,t,n){L.setItem(e,JSON.stringify(t)),n(t)},A=window.innerWidth<=900;var E=function(){var e=Object(r.useState)(I("allowedDistanceRadius",5e3)),t=Object(i.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(I("user",null)),s=Object(i.a)(o,2),u=s[0],d=s[1],b=Object(r.useState)(I("friends",[])),f=Object(i.a)(b,2),p=f[0],x=f[1],g=Object(r.useState)(null),N=Object(i.a)(g,2),R=(N[0],N[1]),k=function(e){return M("user",e,d)},S=function(e){return M("friends",e,x)};Object(r.useEffect)((function(){F({user:u,friends:p,setFriends:S})}),[u,p]),console.log("user",u),console.log("friends",p);var C=null!==u;return Object(j.jsxs)("div",{className:"App h-screen w-full bg-gray-100 grid grid-cols-5",children:[Object(j.jsxs)("div",{className:"  col-span-5 md:col-span-1 p-2 pb-8",children:[C?null:Object(j.jsx)("p",{className:"font-semibold bg-white p-2 border-4 rounded border-red-500",children:"Access to your browser's location information is required. This data is not stored on servers, it is stored in your local browser. Click the location pin in your URL bar above to enable location information and refresh the webpage."}),Object(j.jsx)("h1",{className:"mt-4 mb-4 bold text-center w-full",children:"COVID Meetup Radius"}),Object(j.jsxs)("p",{className:"mb-8 italic text-center w-full text-sm",children:["Find which friends are within your ",n/1e3,"Km radius and where you can go for outdoor exercise"]}),C?Object(j.jsx)(O,{allowedDistanceRadius:n,setUser:k,user:u}):null,Object(j.jsx)(w,{removeFriend:function(e){return S(function(e){var t=e.friends,n=e.friendToRemove;return t.filter((function(e){return e.id!==n.id}))}({friends:p,friendToRemove:e}))},friends:p}),Object(j.jsx)(v,{allowedDistanceRadius:n,setAllowedDistanceRadius:function(e){return M("allowedDistanceRadius",e,a)}}),Object(j.jsx)(y,{})]}),Object(j.jsx)("div",{id:"mapDivContainer",className:"col-span-5 md:col-span-4",children:Object(j.jsxs)(c.a,{className:"h-full w-full",center:h,zoom:A?12:13,children:[Object(j.jsx)(U,{setMapObj:function(e){return R(e)},user:u,setUser:function(e){return k(e)}}),C?Object(j.jsx)(m,{allowedDistanceRadius:n,color:"orange",user:!0,location:u.location,name:"Your location"}):null,p.map((function(e){return Object(j.jsx)(m,{color:e.color,allowedDistanceRadius:n,user:!1,location:e.location,name:e.name},e.id)})),Object(j.jsx)(l.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})]})})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),o(e),s(e)}))};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(E,{})}),document.getElementById("root")),J()}},[[49,1,2]]]);
//# sourceMappingURL=main.b9b5cd1e.chunk.js.map